\documentclass{article}
\usepackage{cancel}
\usepackage{float}
\usepackage{tikzit}
\input{preamble.tex}
\input{zx.tikzstyles}

\def\tikzscale{1.5}

\newtheorem{example}{Example}
\newcommand*\conj[1]{\bar{#1}}
\newcommand{\abs}[1]{{\big\vert} #1 {\big\vert}}
\newcommand{\kz}[1]{\ket{\,#1\,}}
\newcommand{\kx}[1]{\ket{#1}}
\newcommand{\bz}[1]{\bra{\,#1\,}}
\newcommand{\bx}[1]{\bra{#1}}
\newcommand{\gate}[1]{\textbf{\textsf{#1}}}
\newcommand{\mkzero}{\begin{bmatrix}1\\ 0\end{bmatrix}}
\newcommand{\mkone}{\begin{bmatrix}0\\ 1\end{bmatrix}}
\newcommand{\mkplus}{\large{\frac{1}{\sqrt{2}}}\begin{bmatrix}1\\ 1\end{bmatrix}}
\newcommand{\mkminus}{\large{\frac{1}{\sqrt{2}}}\begin{bmatrix}1\\ -1\end{bmatrix}}
\newcommand{\mab}[2]{\begin{bmatrix}#1\\ #2\end{bmatrix}}
\newcommand{\transpose}{\text{T}}

\begin{document}

\tableofcontents

\section{A bit of quantum}
\subsubsection{A \textbf{bit} of information}
Say you were asked, ``Do you like pineapple on pizza?'', and you could respond only with either ``Yes'' or ``No''.
In other words, you can only give one \textbf{bit} of information in response.
A \textbf{bit} can have one of two possible values.  For example, these two values could be yes or no, true or false, on or off,...
In computers, we call these two possible values 0 and 1.  If we have many bits, we can store many possible values.

As an analogy, whenever you flip a light switch, you expect to either turn on a lightbulb, or turn off a lightbulb.
Flipping the light switch thus flips the \textbf{bit} that represents the state of the lightbulb, between ``on'' and ``off'.
Likewise, your computer is built from billions of these switches, called \textit{transistors}, like in Figure \ref{fig:tsmc}.
\begin{figure}[h!]%%%note don't have permissions to use this image
	\label{fig:tsmc}
	\includegraphics[width=\columnwidth]{images/rainbowtsmc.jpg}
	\caption{This semiconductor chip made by TSMC has been magnified exorbitantly.  Each transistor in this chip is so small, that if you lined up a thousand of them from end to end, it would be smaller than the width of a human hair.}
\end{figure}

\subsection{Diagrams}
We use diagrams to describe what happens to a system over time.  We use here the convention of reading diagrams from bottom (earliest time) to top (latest time).
\subsubsection{\textbf{Boxes} and \textbf{wires}}
In diagrams, each \textbf{wire} carries information.  They can represent physical wires, such as the electrical wire which connects your light switch to your lightbulb.  They can also represent imaginary wires, such as the sound waves when you verbally answer the question, ``Do you like pineapple on pizza?''
A \textbf{box} in our diagram represents a process: something that transforms inputs into outputs.
These inputs and outputs are our wires.  Each wire has a \textbf{type}, and each input and output of a process must be of the right type.  For instance, for the process of doing laundry, the inputs and outputs are your clothes; you wouldn't put your trash through the laundry (hopefully).
We draw boxes as trapezoids; shortly, we will see why this way of drawing them is useful.

This box represents the switch process, which flips the input bit:
\begin{equation*}{\scalebox{\tikzscale}{\tikzfig{switch_process}}}\end{equation*}
\subsubsection{\textbf{States} and \textbf{tests}}
A \textbf{state} is a process with no inputs.  In our diagrams, we draw a state as an isosceles triangle with the output wires on the base of the triangle.

A lightbulb has two possible states: on and off.  If we wire up a lightbulb to our switch, flipping the switch turns on the lightbulb:
\begin{equation}
\label{eq:switch_on}
{\scalebox{\tikzscale}{\tikzfig{switch_on}}}
\end{equation}
Likewise, we can flip the switch connected to a lit lightbulb to turn it off:
\begin{equation}
\label{eq:switch_off}
{\scalebox{\tikzscale}{\tikzfig{switch_off}}}
\end{equation}
A \textbf{test}\footnote{In the wild\cite{PQP}, another word for it is \textbf{effect}.} is a process with no outputs.  When a test is applied to a state, it tests how likely the corresponding outcome is to occur.

In our diagrams, we draw a test as an upside-down state: an isosceles triangle with the input wires on the base of the triangle.  To apply a test to a state, we connect the state and the test with a wire.  This way, the output of the state is the same as the input to the test.  In total, our diagram with a test applied to a state has zero inputs and zero outputs --- this is called a \textbf{number}.  This number encodes the probability that given that state, the outcome observed is the outcome being tested for.

For our lightbulb example, when the test matches the state, this number equals 1:
\begin{equation}
{\scalebox{\tikzscale}{\tikzfig{lightbulb_test00}}}
\end{equation}

\begin{equation}
\label{eq:lightbulb_test11}
{\scalebox{\tikzscale}{\tikzfig{lightbulb_test11}}}
\end{equation}
On the other hand, when the test is the opposite of the state, this number equals 0:
\begin{equation}
{\scalebox{\tikzscale}{\tikzfig{lightbulb_test01}}}
\end{equation}
\begin{equation}
{\scalebox{\tikzscale}{\tikzfig{lightbulb_test10}}}
\end{equation}

\subsection{A \textbf{qubit} of information}
\subsubsection{Classical states and tests}
Having learned about states and tests in general, we are now ready to start tackling quantum states and tests.  Alongside gaining intuition from our diagrams, we will learn how to use \textit{bra-ket notation} (also called Dirac notation, as it was created by Paul Dirac so a physicist could represent vectors).  Thankfully, this new jargon is simple: kets are what we call states, and bras are what we call tests.

Just as a bit is the smallest unit of information in a computer, a \textbf{qubit} is the smallest unit of information in a quantum computer.
We can encode any bit as a qubit by mapping a bit with value 0 to the $\kz0$ (pronounced ``ket 0'') qubit state, and a bit with value 1 to the $\kz1$ (pronounced ``ket 1'') qubit state.  These are defined as:
\begin{align}
\label{eq:ket0}
&\tikzfig{ket0}\\
\label{eq:ket1}
&\tikzfig{ket1}
\end{align}

Let us plot them on the unit circle of the real 2D plane.
\begin{figure}
	\label{fig:unitcircle}
	\ctikzfig{unitcircle01}
	\caption{$\kz0$ and $\kz1$ are plotted here on the unit circle.}
\end{figure}
Let us note a few of their properties:
\begin{itemize}
\item They are \textit{orthogonal}: on the unit circle there is a right angle between them.
\item They are \textit{normalized}: they have a vector norm, or length, of 1.
\item They \textit{span} the real 2D plane: you can get any arbitrary 2D vector $\vec{v}$ of real numbers by taking their linear combination
\begin{align}
	\ket{v} &= a \kz0 + b \kz1\\
	&= a \mkzero + b \mkone\\
	&= \mab{a}{b}
\end{align}
where $a$ and $b$ are complex numbers\footnote{Mathematicians might call them coefficients, and physicists might call them probability amplitudes.}.
\end{itemize}
They form an \textbf{orthonormal basis} for $\mathbb{R}_2$, the \textit{vector space} of real 2D vectors.
We call this basis the \textbf{computational basis} because they encode a qubit as a bit.

Apart from the unit circle, another way to visualize these two states is on a sphere called the \textbf{Bloch sphere}, which looks like:
\begin{figure}
	\label{fig:blochsphere}
	\ctikzfig{blochxyz}	
	\caption{This is what the Bloch sphere looks like.}
\end{figure}
In addition to calling this basis for qubit states the computational basis, we also call it the \textbf{Z basis}.  This is because these states are on the positive and negative z-axis of the Bloch sphere.
\begin{figure}
	\ctikzfig{bloch01}
	\caption{$\kz0$ and $\kz1$ are plotted here on the Bloch sphere.}
\end{figure}
You might notice that on the Bloch sphere, the angle between these two states is $\pi$, or $180\deg$.  However, when you take the inner product of the vectors in Equations \ref{eq:ket0} and \ref{eq:ket0}, or plot them on the unit circle as in Figure \ref{fig:unitcircle}, the angle between these two states' vectors is $\frac{\pi}{2}$ radians ($90\deg$).
Indeed, any angle on the Bloch sphere is twice what it would be if we had plotted the vector in 2D.
While this may seem like an unnecessary complication now, we will later see how the Bloch sphere helps us visualize when our qubit states contain \textit{complex numbers}.
Throughout this text we will use radians instead of degrees, and adopt the convention of angles being angles on the Bloch sphere.

\subsubsection{The qubit NOT gate}
Recall how earlier in Equations \ref{eq:switch_on} and \ref{eq:switch_off}, we modelled how a light switch is a process which turns on an off lightbulb, and turns off an on lightbulb?
That is the NOT operation on a bit.
On a qubit, we also have a NOT operation which behaves as you expect:
\begin{equation}
	\tikzfig{ket0switch}
\end{equation}
\begin{equation}
	\tikzfig{ket1switch}
\end{equation}
When your qubit is in one of the classical states (corresponding to the two possible values a bit can have on a classical computer), the NOT gate is the bit flip gate: if you interpret 0 as false and 1 as true, then not true is false and not false is true.  The NOT gate flips the $\kz0$ state to the $\kz1$ state, and the $\kz1$ state to the $\kz0$ state.

What does the NOT gate do to a qubit state in general?  What it does is rotate the state vector on the Bloch sphere half a rotation about the x-axis; the axes are labelled in Figure \ref{fig:blochsphere}.  That is why the NOT gate is also called the \textbf{X gate}, as we will call it from now on.

As in our lightbulb example, when we flip a diagram of a state upside-down, we get a diagram of a test.
Flipping our diagrams of $\kz0$ and $\kz1$ in Equations \ref{eq:ket0} and \ref{eq:ket1} upside-down gives $\bz0$ (``bra 0'') and $\bz1$ (``bra 1'') respectively:
\begin{align}
&\tikzfig{bra0}\\
&\tikzfig{bra1}
\end{align}

We can connect the wire from state to test to get a number:
\begin{align}
	&\tikzfig{braket00} \label{eq:braket00} \\
	&\tikzfig{braket01}\\
	&\tikzfig{braket10}\\
	&\tikzfig{braket11}
\end{align}
This number is the \text{inner product} of the bra vector and the ket vector.

You can observe one similarity between bra-ket notation here and conditional probability: the notation of a vertical line in-between.  For events \textsf{A} and \textsf{B},
\begin{equation}
	\text{Pr}(\,\textsf{A}\,|\,\textsf{B}\,) \coloneqq \text{Probability of \textsf{A} given \textsf{B}}
\end{equation}
This is by design.  In general, given a \textit{normalized}\footnote{We'll give a mathematical definition of this later.  Intuitively, you want your states and tests to be normalized so that you don't break the rules of the universe governing probabilities.} state $\ket{\,s\,}$ and test $\bra{\,t\,}$ pair, the probability that you observe the outcome $\bra{\,t\,}$ you were testing for, given the state is $\ket{\,s\,}$, is
\begin{equation}
	\label{eq:braketprob}
	\text{Pr}(\,t\,|\,s\,) = \abs{\langle \,t\,|\,s\,\rangle}^2
\end{equation}
In other words, the probability is the \textit{norm-squared} of the inner product.  This inner product is called a \textbf{probability amplitude}, or amplitude for short.

\subsubsection{The X-basis states}
We have gotten comfortable with the qubit states which encode the classical bit states 0 and 1.  Yet if all we do with qubits is represent binary values, we are using a quantum bit to do exactly what a classical bit does.  We now demystify the math of one of the key features of quantum computing: \textit{superposition}.
A qubit is more powerful than a bit.  Informally, it can be 0, 1, or ``anything in-between''.  \textbf{Superposition} is this property of quantum states to encode information ``in-between'' states.  You might also hear people call a superposition of states, a \textit{mixture} of states.

We now introduce the two \textbf{X basis} states, $\kx+$ and $\kx-$:
\begin{align}
&\tikzfig{ket+}\\
&\tikzfig{ket-}
\end{align}

Perhaps you can guess what happens when given an X-basis state, you test for an X-basis state:\nopagebreak
\begin{align}
	&\tikzfig{braket++}\\
	&\tikzfig{braket--}\\
	&\tikzfig{braket+-}\\
	&\tikzfig{braket-+}
\end{align}

On the Bloch sphere, they are on the positive and negative x-axis:
\begin{figure}[H]
	\ctikzfig{bloch+-}
	\caption{$\kx+$ and $\kx-$ are plotted here on the Bloch sphere.}
\end{figure}

You can think of the X-basis states as being exactly ``halfway in-between'' the Z-basis states.  Indeed, on the Bloch sphere, $\kz0$ and $\kz1$ are respectively on the north and south poles, while $\kx+$ and $\kx-$ are on the equator:
\begin{figure}[H]
	\ctikzfig{bloch+-wrt01}
	\caption{All states ``halfway in-between'' $\kz0$ and $\kz1$, such as $\kx+$ and $\kx-$, lie on the equator of the Bloch sphere.}
\end{figure}

In other words, the X-basis states are both \textbf{superpositions}, i.e. a complex linear combination, of the Z-basis states:
\begin{align}
\ket{+} &= \frac{1}{\sqrt{2}} (\kz0 + \kz1) \label{eq:kp01} \\
\ket{-} &= \frac{1}{\sqrt{2}} (\kz0 - \kz1) \label{eq:km01} \\
\end{align}
Nicely, the Z-basis states are in turn both superpositions of the X-basis states:
\begin{align}
\kz0 &= \frac{1}{\sqrt{2}} (\ket{+} + \ket{-}) \label{eq:k0pm} \\
\kz1 &= \frac{1}{\sqrt{2}} (\ket{+} - \ket{-}) \label{eq:k1pm}
\end{align}

Furthermore, Equations~\ref{eq:kp01}~to~\ref{eq:k1pm} above are \textit{uniform} superpositions --- each probability amplitude (i.e. coefficient) has the same magnitude of $\frac{1}{\sqrt{2}}$.
What this means is that the inner product of an X-basis state with a Z-basis state has magnitude $\frac{1}{\sqrt{2}}$:
\begin{align}
&\tikzfig{braket0+} \label{eq:braket0+} \\
&\tikzfig{braket1+}\\
&\tikzfig{braket0-}\\
&\tikzfig{braket1-} \label{eq:braket1-}
\end{align}
As we learned in Equation \ref{eq:braketprob}, the norm-squared of the probability amplitude is the probability you observe the outcome you're testing for.    Let's see this through an example.

\begin{example}
\label{ex:pr1m}
If your state is $\kx-$, and you test for $\kz1$, what is the probability you observe $\kz1$?

\textnormal{From Equation \ref{eq:braketprob}, we know that the probability of observing $\kz1$ when the state is $\kx-$ is $\abs{\langle\,1,\,|-\rangle}^2$.  In Equation \ref{eq:braket1-}, we found that $\langle\,1,\,|-\rangle = \texttt{-}\frac{1}{\sqrt{2}}$.  Therefore, the probability is $\abs{\langle\,1,\,|-\rangle}^2 = \frac{1}{2}$.}
\end{example}

You'll find that if you test for $\kz0$ when the state is $\kx-$, the probability is also $\frac{1}{2}$.  We've now arrived at the physical meaning of why we say that the X-basis states are ``halfway in-between'' the Z-basis states!  This leads us to the very important of quantum measurement...

\subsection{Quantum Measurement}
So far, we have talked about the mathematical description of the Z- and X- basis qubit states.  Now, let's talk about what is going on physically.
All around us are ``quantum states''.  You are made up of perhaps an octillion ($10^{27}$) molecules.  At any time, each molecule has its own quantum state.  However, in our macroscopic (at least compared to the length scale of individual molecules) world, we simply observe the collection of those molecules --- you!

Quantum effects only become relevant at really tiny length scales.  The size of today's transistors is just about small enough that quantum effects come into play.
\textit{Classical mechanics} is sufficient to describe most of physics on the length scale of us humans.  We need \textit{quantum mechanics} to describe physics on the length scale of atoms and molecules.

To explore quantum measurement, we'll start with one of the earliest experiments in the history of quantum physics: the Stern-Gerlach experiment~\cite{Gerlach_Stern_1922}.  In fact, it was the first experiment where separate quantum states were directly observed!

Otto Stern designed this experiment, which Walther Gerlach carried out, where silver atoms were sent through an inhomogenous (different strength at different points in space) magnetic field and then hit a detector screen.  What happened, was that half of the atoms were deflected up, and half of the atoms were deflected down.  Interestingly, none of the atoms were observed at the height in-between.  This suggested that each silver atom had as an intrinsic property specifying which of the two directions it would be deflected in this experiment.  This property is \textbf{quantized} because when it is observed, its possible values are discrete rather than a continuous distribution.  If the atoms were instead spinning magnetic dipoles, they would be deflected by the magnetic field in a direction according to their spin, although the physics are different.  Due to this analogy, this quantized value of the atom is called \textit{spin}.

Due to the magnetic field (say it's oriented so its north pole is in the $+$z direction), atoms in a spin up quantum state would be deflected one way (up), and atoms in a spin down quantum state would be deflected the opposite way (down).

Up to now, given a qubit state, we have computed the probabilities of observing a certain outcome that we are testing for.  We will now learn about \textbf{orthonormal basis (ONB) measurement} --- a type of \textbf{quantum measurement} in which you observe exactly one of the outcomes in your chosen orthonormal basis of quantum states.  This is the type of quantum measurement you will use the most as a quantum computer scientist.  This is also the type of measurement done by the inhomogenous magnetic field in the Stern and Gerlach experiment.

When you perform an ONB measurement, you are actually simultaneously testing for all of the states in your ONB.  You can only observe one of those states, which is your measurement outcome.  The probability of you observing each outcome is exactly as how we have been computing so far: taking the norm-squared of the braket between your test (one of the states in your orthonormal basis) and your quantum state.

After your ONB measurement, \textit{your state becomes the one that was your measurement outcome}.  Doesn't matter if your state was not one of the ones in your ONB --- if that case, the act of performing quantum measurement changes the very state you are measuring.

At first, this may seem counterintuitive to our macroscopic world.  If you hold a ruler to find the position of a pin, you wouldn't expect the ruler to change where the pin is.  However, just to see the pin, you need to shine light on it.  Light is made up of photons which have momentum.  This momentum does nothing, as far as our eye can tell, to a massive (compared to the photon) object like the pin, but if it was instead a much smaller object with size comparable to that of photons, the momentum could be absorbed by it.  Therefore, your act of trying to see the pin can change the state of the pin.
%%% need to refine this explanation, create a ``collapse'' image, and create a unit circle trig image

As we saw from Example \ref{ex:pr1m}, the Z- and X- bases have the property that when measured in the other of the two bases, the probability of any measurement outcome is uniformly $\frac{1}{2}$.  For this reason, the Z- and X- bases are called \textit{mutually unbiased bases} with respect to each other.  We've now learned enough about mathematically describing quantum two-state systems to combine that understanding with what Stern and Gerlach observed.

\begin{example}[Z-measurement then Z-measurement] \label{example:sterngerlachzz}
Stern and Gerlach observed that each silver atom passing through their inhomogenous magnetic field in the z direction had a $\frac{1}{2}$ chance of being deflected upwards ($+$z direction), and a $\frac{1}{2}$ chance of being deflected downwards ($-$z direction).  They then took each silver atom that was deflected upwards, and sent that through another inhomogenous magnetic field in the z direction.  This second time, all the atoms were deflected upwards --- why?

\begin{figure}[h!]
	\ctikzfig{sterngerlachzz}
	\caption{This is what Stern and Gerlach saw when they sent a beam of silver atoms through the experimental setup of Example \ref{example:sterngerlachzz}.}
\end{figure}

\textnormal{All of the atoms deflected upwards by the first field (which was in the z-direction) were in the $z_+$ (spin up with respect to the z-axis) state, which we'll represent as the $\kz0$ state because the $\kz0$ state points in the $+$z direction on the Bloch sphere.  After those $z_+$ atoms traversed the second field (which was also in the z-direction), the probability of observing $z_+$ was \begin{equation}
	\text{Pr}(\,0\,|\,0\,) = \abs{\langle\,0\,|\,0\,\rangle}^2
\end{equation}
From Equation \ref{eq:braket00}, we know that $\langle\,0\,|\,0\,\rangle$ is 1.  Therefore, all atoms that were deflected upwards after the first field, were also deflected upwards after the second field.}

\textnormal{Following this logic, we expect that any number of Z-measurements done thereafter would continue to yield the $z_+$ state.}
\end{example}

\begin{example}[Z-measurement then X-measurement] \label{example:sterngerlachzx}
	Stern and Gerlach observed that each silver atom passing through their inhomogenous magnetic field in the z direction had a $\frac{1}{2}$ chance of being deflected upwards ($+$z direction), and a $\frac{1}{2}$ chance of being deflected downwards ($-$z direction).  They then took each silver atom that was deflected upwards, and sent that through another inhomogenous magnetic field, this time in the x direction.  This second time, $\frac{1}{2}$ the atoms were deflected in the $+$x direction and $\frac{1}{2}$ the atoms were deflected in the $-$x direction --- why?
	
	\begin{figure}[h!]
		\ctikzfig{sterngerlachzx}
		\caption{This is what Stern and Gerlach saw when they sent a beam of silver atoms through the experimental setup of Example \ref{example:sterngerlachzx}.}
	\end{figure}

	\textnormal{Again, we use the $\kz0$ state to represent $z_+$, all atoms deflected upwards by the first field.  The $\kx+$ and $\kx-$ states are suitable to represent $x_+$ and $x_-$, the state of all atoms after the x-aligned magnetic field, because these states point in the $+x$ and $-x$ directions on the Bloch sphere.	After those $z_+$ atoms traversed the second field (in the x-direction), the probability of observing $x_+$ was
	\begin{equation}
		\text{Pr}(x_+|z_+) = \text{Pr}(+|\,0\,) = \abs{\langle+|\,0\,\rangle}^2
	\end{equation}
	and the probability of observing $x_-$ was
	\begin{equation}
		\text{Pr}(x_-|z_+) = \text{Pr}(-|\,0\,) = \abs{\langle-|\,0\,\rangle}^2
	\end{equation}
	From Equation \ref{eq:braket0+}, we know that $\langle+|\,0\,\rangle = \conj{\langle\,0\,|+\rangle} = \conj{\frac{1}{\sqrt{2}}} = \frac{1}{\sqrt{2}}$.  Likewise, $\langle-|\,0\,\rangle = \frac{1}{\sqrt{2}}$.  Therefore, all atoms that were deflected upwards after the first field, had a 50-50 chance of being deflected left or right after the second field.}
\end{example}

\begin{example}[Z-measurement then X-measurement then Z-measurement] \label{example:sterngerlachzxz}
	After their setup in Example \ref{example:sterngerlachzx}, Stern and Gerlach sent the $x_+$ silver atoms through one more z-aligned inhomogenous magnetic field.  They were surprised at what they saw.  What did they see?
	
	\begin{figure}[h!]
		\ctikzfig{sterngerlachzxz}
		\caption{This is what Stern and Gerlach saw when they sent a beam of silver atoms through the experimental setup of Example \ref{example:sterngerlachzxz}.}
	\end{figure}

	\textnormal{At the end of Example \ref{example:sterngerlachzx}, the state was $x_+$, which we worked out is the $\kx+$ state.  After those $x_+$ atoms traversed the third field (in the z-direction), the probability of observing $z_+$ was
	\begin{equation}
		\text{Pr}(z_+|x_+) = \text{Pr}(\,0\,|+) = \abs{\langle\,0\,|+\rangle}^2
	\end{equation}
	and the probability of observing $z_-$ was
	\begin{equation}
		\text{Pr}(z_-|x_+) = \text{Pr}(\,1\,|+) = \abs{\langle\,1\,|+\rangle}^2
	\end{equation}
	From Equation \ref{eq:braket0+}, we know that $\langle\,0\,|+\rangle = \frac{1}{\sqrt{2}}$.  Likewise, $\langle\,1\,|+\rangle = \frac{1}{\sqrt{2}}$.  Therefore, all atoms that were in the $\kx+$ state after the second field, had a 50-50 chance of being deflected up or down by the third field.  Therefore, the reason for Stern and Gerlach's surprise was that although the second of two consecutive Z-measurements yielded all $\kz0$ as we saw in Example \ref{example:sterngerlachzz}, adding an X-measurement in-between the Z-measurements changed that to half $\kz0$ and half $\kz1$.}
\end{example}

% We can represent any pure\footnote{We will later learn about \textit{mixed} qubit states, which are a mixture of pure qubit states.} qubit state, denoted $\ket{p}$, as a column of two complex numbers:
% \begin{equation}
% \end{equation}

\subsection{More diagrams}
%%% I think this section is for conjugate transpose kind of things?

\subsubsection{Rewriting diagrams with equations}
So far we have used diagrams in equations without stating what that means.  If we have two equal diagrams, whenever we see one of them, we can replace it with the other.

This is handy in simplifying diagrams.  Below, we replace the diagram in the gray dashed box with a diagram equal to it, according to Equation \ref{eq:switch_on}.  We can then use Equation \ref{eq:lightbulb_test11} to rewrite the diagram to the number 1.  In other words, given the information that the lightbulb is working, we showed that after you flip the light switch connected to the off lightbulb, the probability that you observe the lightbulb to be on is 1.
\begin{equation}
{\scalebox{\tikzscale}{\tikzfig{lightbulb_simp}}}
\end{equation}

\newpage
\subsection{Classical logic gates}
The transistors in your phone are constantly performing binary logic gates such as the NOT gate in our light switch example.  \textit{Binary} means that each input or output of these gates is one of two possible values, which we call 0 and 1 --- a bit.

While the NOT gate has just one input, a binary logic gate can have more than one input.  Given the question ``Would you like tea or cookies?'', a programmer with a sense of humor could respond ``Yes'' or ``No''.  If you are thinking of the question as computing an OR gate\footnote{For some people, ``or'' in casual conversation is meant as either-or (a.k.a. mutually-exclusive-or a.k.a. XOR).  For clarity we'll use logic in conversation here taking them to have the same meaning as they do in binary logic, despite the many exceptions in colloquial English.}, your two inputs are 1) whether you would like tea, and 2) whether you would like cookies.  If you would like tea and no cookies, you would answer ``Yes''.  If you would like cookies and no tea, you would also answer ``Yes''.  If you would like both tea and cookies, you would answer ``Yes''.  If you would like neither tea nor cookies, you would answer ``No''.

Like computer engineers do, we can use a circuit diagram to show the inputs and outputs.  The conventional circuit diagram symbol for the binary OR logic gate is shown in Figure \ref{ref:teaorcookies}.

\begin{figure}[h!]
	\label{ref:teaorcookies}
	\ctikzfig{teaorcookies}
	\caption{The OR gate here is drawn as its conventional circuit diagram symbol.  It has two input bits and one output bit.  For instance, if the two inputs are ``Yes'' for liking tea and ``No'' for liking cookies, the output is therefore ``Yes'' for liking tea or cookies.}
\end{figure}

We can also compactly list the above logic in a table called a \textit{truth table}.  A truth table for a logic gate has two columns: it displays the output(s) in the right column, given the input(s) in the left column.  We will use the convention of 1 meaning ``Yes'', and 0 meaning ``No''.  By letting 1) whether you would like tea, and 2) whether you would like cookies, be your two inputs, the right column of the truth table for the OR gate gives whether your answer to ``Would you like tea or cookies?'' is ``Yes'' or ``No''.  Figure \ref{fig:classical_logic_gates} gives the circuit diagram and truth table of the OR gate, and several of the other most important binary logic gates.
\begin{figure}[h!]
	\ctikzfig{classical_logic_gates}
	\label{fig:classical_logic_gates}
	\caption{Although it would be cumbersome to do so, you can directly express all computation done by your phone in terms of the gates here.  On the left side are the four diagrams representing the NOT, AND, OR, and XOR (``either or'') gate respectively.  The input(s) to each gate are on its left, and the output(s) are on its right.  On the right side, the \textit{truth table} for each gate is given.}
\end{figure}

As their inputs and outputs are all bit(s), you can apply these gates one after another.  For instance, when we apply the NOT gate after the AND gate, we get the NAND (``not and'') gate:
\begin{equation}
	\tikzfig{nand}
\end{equation}

Likewise, applying the NOT gate after the OR gate yields the NOR (``not or'') gate:
\begin{equation}
	\tikzfig{nor}
\end{equation}

The NAND gate is \textbf{universal}.  This means that you can do \underline{any} computation on bits using just this one gate.  The NOR gate is also universal.  Indeed, you can build all the necessary components of a computer of just NAND gates, and there are texts on how to do exactly that.  Putting physical hardware limitations aside, this concept of universality is important in quantum computing to know whether the quantum gates you can perform can be applied in such a way as to implement any quantum circuit.

Furthermore, different circuits can perform the exact same logical operation.
The simplest example is that two NOT gates is the same computation as applying no gates at all:
\begin{equation}
	\label{eq:notnot}
	\tikzfig{notnot}
\end{equation}

Another example, well-known for binary operations, is \textit{deMorgan's laws}.  Given two bits \textsf{A} and \textsf{B}, deMorgan's laws consists of two equations:
\begin{align}
	\text{NOT(\textsf{A} AND \textsf{B})} &= \text{(NOT \textsf{A}) OR (NOT \textsf{B})} \\
	\text{NOT(\textsf{A} OR \textsf{B})} &= \text{(NOT \textsf{A}) AND (NOT \textsf{B})}
\end{align}
You can check that these equations are correct by determining the truth table for both sides of the equation, then verifying that the truth tables are identical.  Given truth tables of all the gates in the circuit, you can obtain the truth table of the circuit via the following steps.  These steps are given for your reference as it may be helpful to be aware of truth tables when learning about quantum logic gates; however, we will not ask you to do this computation as it is rather tedious --- exponentially so in the number of input bits.
\begin{enumerate}
	\item Write all possible inputs in the left column.  For $n$ input bits, there should be $2^n$ possible inputs, because each bit can be either 0 or 1.
	\item Choose a row of the truth table where the right column is empty, and set the bits of the inputs according to its left column.
	\item Starting from the leftmost gates, from the gate's input(s), determine its output bit.  This can be done by looking up the truth table for that gate.
	\item Pass on that gate's output as an input to the next gate, and repeat Step 3 for the next gate.  If there is no next gate, then this bit is an output bit.
	\item When you have determined each output bit for these specific input bits, write the output in the right column of the row of the truth table you chose in Step 2.
	\item Repeat Steps 2 to 5 until the truth table is complete.
\end{enumerate}

The more gates involved, the harder it is to keep track of all the parentheses.  This is where circuit diagrams come in handy to clearly and fully describe deMorgan's laws:
\begin{align}
	{\scalebox{0.84}{\tikzfig{demorganslaw1}}} \\
	{\scalebox{0.84}{\tikzfig{demorganslaw2}}} \label{eq:demorganslaw2}
\end{align}

Most importantly of all, we can use these \textit{diagram rewrite rules} to simplify a circuit to one that does the exact same computation.  As an added bonus, being proficient at this helps us better understand the computation at hand.
\begin{example}
\label{example:nnorn}
Without actually computing any truth table(s), what is the truth table of the circuit in this diagram?
\begin{figure}
	\ctikzfig{nnorn}
	\label{fig:nnorn}
	\caption{The circuit which Example \ref{example:nnorn} asks to find the truth table for}
\end{figure}

\textnormal{Thankfully, with the circuit diagram rewrite rules we have so far, we are ready to tackle this problem.  Whenever we draw a gray dashed box around a part of the diagram, it means that in the next step, we will substitute for that part of the diagram, another diagram which accomplishes the same computation.  The equation number of the diagram rewrite rule which permitted us to do this substitution is then indicated above the next equals sign.
\begin{equation}
\tikzfig{nnorn_simp1}
\end{equation}
\begin{equation}
\tikzfig{nnorn_simp2}
\end{equation}
\begin{equation}
\tikzfig{nnorn_simp3}
\end{equation}
Therefore, the given circuit has the same truth table as the AND gate.
}
\end{example}

One observation to point out is that some of these classical logic gates are not \textit{reversible}.  For a gate $g$ to be reversible, there must exist a gate $g'$ (which can be same as or different to $g$) that can ``undo'' the computation done by $g$.  In other words, applying $g'$ after $g$ should be the same as if you applied no gates, i.e. the identity operation.  When you have more input bits than output bits, there are more possible inputs than possible outputs; therefore the gate cannot be reversible, as there is at least one possible output for which it is impossible to uniquely determine what the input was.

Fun fact: the information lost when an irreversible gate is performed is dissipated as heat energy.  Next time your phone or computer heats up when performing intense computation, you know why.

\subsection{Quantum gates}
\subsubsection{The X gate}
\begin{figure}[h!]
	\ctikzfig{unitcirclex}
\end{figure}
\begin{figure}[h!]
	\ctikzfig{unitcirclexex}
\end{figure}

\newpage
\subsubsection{The Z gate}
\begin{figure}[h!]
	\ctikzfig{unitcirclez}
\end{figure}
\begin{figure}[h!]
	\ctikzfig{unitcirclezex}
\end{figure}

\newpage
\subsubsection{The H gate}
\begin{figure}[h!]
	\ctikzfig{unitcirclehopposite}
\end{figure}

\begin{figure}[h!]
	\ctikzfig{unitcirclehreflect}
\end{figure}

\newpage
\subsection{The pure qubit state, in general}
So far we have seen several examples of one-qubit states depicted on the unit circle and the Bloch sphere.  What do you need to depict any one-qubit state in general?

\subsubsection{Statevectors on the unit circle}
Any vector $\kx{v}$ on the unit circle by definition has magnitude (length) 1.
Its general form is
\begin{equation}
	\label{eq:onequbitpurerealform}
	\tikzfig{ketv}
\end{equation}
where $a$ and $b$ are real numbers.
When you perform a Z-basis measurement on a qubit whose statevector is of this form, according to Equation \ref{eq:braketprob}, the probability your outcome is $\kz0$ is
\begin{align}
	\text{Pr}(\,0\,|\,v\,) &= \abs{\langle \,0\,|\,v\,\rangle}^2\\
	&= \abs{\bz0 \text{\large(}a\kz0 + b\kz1\text{\large)}}^2\\
	&= \abs{a\,\langle \,0\,|\,0\,\rangle + b\,\langle \,0\,|\,1\,\rangle}^2\\
	&= \abs{a + 0}^2\\
	&= a^2
\end{align}
Likewise, the probability your outcome is $\kz1$ is $b^2$.  Since the only possible outcomes are $\kz0$ and $\kz1$, probability is conserved:
\begin{equation}
	a^2 + b^2 = 1
\end{equation}
Let's plot $\kx{v}$ on the unit circle.  In Figure \ref{fig:unitcircletriangle}, $a$ and $b$ are positive, but they can be any numbers from $-1$ to $1$ inclusive as long as they satisfy the above equation, or equivalently are on the unit circle.
\begin{figure}[h!]
	\label{fig:unitcircletriangle}
	\ctikzfig{unitcircletriangle}
	\caption{A one qubit statevector $\kx{v}$ of the form $a\kz0 + b\kz1$, where $a$ and $b$ are real numbers, plotted on the unit circle.  The vector $\vec{v}$ forms the hypotenuse of a right triangle with sides of length $\abs{a}$ and $\abs{b}$.}
\end{figure}
It helps to draw a right triangle where the hypotenuse is $\kx{v}$, and the sides are parallel with $\kz0$ and $\kz1$.
Hence when $a$ and $b$ are real numbers, it is convenient to remember that the probabilities working out is simply the Pythagorean theorem:
\begin{equation}
	a^2 + b^2 = c^2
\end{equation}
where $a$ and $b$ are sides of the right triangle and $c$ is the hypotenuse.  In our case of a vector on the unit circle, meaning it has to have length 1, i.e. $c = 1$.

\subsubsection{Statevectors on the Bloch sphere}
The unit circle is not sufficient for our purposes.  That is because in general, a pure one qubit statevector is of the form
\begin{equation}
	\label{eq:onequbitpuregenform}
	\tikzfig{ketpsi}
\end{equation}
where $\alpha$ and $\beta$ are complex numbers.
Hence compared to Equation \ref{eq:onequbitpurerealform}, what's new is that coefficients can have imaginary components.  We celebrate this by chopping off the left corner of the triangle in our diagrams.  This will allow us to pictorially represent some key properties of complex vectors, as we will explore in the next section.

We mentioned earlier that going from the unit circle to the Bloch sphere, you double the angles.  We can see this by looking at the slice of the Bloch sphere where the unit circle lives, outlined as a black circle in Figure \ref{fig:unitcircleinbloch}.
Plotting the same statevector, the angle $\theta$ on the Bloch sphere in Figure \ref{fig:unitcircletriangle} is twice the angle $\Theta$ on the unit circle in Figure \ref{fig:unitcircleinbloch}, i.e. $\theta = 2 \Theta$.

We can always plot a statevector with real coefficients on the Bloch sphere in three steps:
\begin{enumerate}
	\item Find the angle $\Theta = \text{arctan}(\frac{b}{a})$
	\item Double that angle to get $\theta = 2 \Theta$
	\item Starting from the $+z$ axis (where $\kz0$ is), rotate an angle of $\theta$ along this slice of the Bloch sphere where the unit circle lives
\end{enumerate}

\begin{figure}[h!]
	\label{fig:unitcircleinbloch}
	\ctikzfig{unitcircleinbloch}
	\caption{A pure one qubit statevector $\kx{\psi}$ has the general form $\alpha\kz0 + \beta\kz1$, where $\alpha$ and $\beta$ are complex numbers.  Here, $\kx{\psi}$ is plotted on the Bloch sphere for the case where both $\alpha$ and $\beta$ are real numbers, and thus $\kx{\psi}$ must lie on the circle outlined in black here.}
\end{figure}
So if vectors on the Bloch sphere whose coefficients are real numbers lie on that circle, what about the rest of the sphere?
The rest of the sphere is where the coefficients have imaginary components.
Before we talk about the general form of any vector on the Bloch sphere, let us first get comfortable with probability amplitudes being complex numbers.

Up until now, to obtain the test corresponding to a state, all we had to do was take the matrix transpose of the ket column vector to get the bra row vector.  That has been correct so far because we have been dealing just with real numbers.  In general, when the statevectors can have complex coefficients, we need to take the \textit{conjugate transpose}\footnote{As a refresher, this means to take the transpose where you also replace each number by its complex conjugate.  This way, when all the numbers are real, the conjugate transpose and transpose operations are identical.} of the ket to get the bra, and the conjugate transpose of the bra to get the ket.

In the following example, we will introduce how we can perform transformations on our diagrams which correspond to transformations on our matrices.
\begin{example}[Y-basis states]
	What are the statevectors and diagrams corresponding to the complex conjugation, transpose, and conjugate transpose of $\kx{+i}$ and $\kx{-i}$, the Y-basis states introduced below?

	\textnormal{While we have seen the Z- and X- basis states in action, we have yet to do anything with the y axis of the Bloch sphere.
	The $+$y and $-$y axes respectively define two Y-basis states:
	\begin{align}
		\label{fig:ket+i}
		\tikzfig{ket+i}\\
		\label{fig:ket-i}
		\tikzfig{ket-i}
	\end{align}
	It doesn't make sense to visualize this on the unit circle, where we don't have an intuitive way of plotting complex numbers.
	On the Bloch sphere, they are simply the states corresponding to the $+$y and $-$y axes.
	\begin{figure}
		\ctikzfig{bloch+i-i}
		\caption{$\kx{+i}$ and $\kx{-i}$ are plotted here on the Bloch sphere.}
	\end{figure}
	}

	Complex conjugation:

	\textnormal{The complex conjugation of a diagram is its horizontal reflection.  Taking the complex conjugate of each element of $\kx{+i}$ and $\kx{-i}$ respectively, we get
	\begin{align}
		\tikzfig{ket+iconj}\\
		\tikzfig{ket-iconj}
	\end{align}
	}

	Transpose:

	\textnormal{The transpose of a diagram is its $180\deg$ rotation.  Taking the transpose of $\kx{+i}$ and $\kx{-i}$ respectively, we get
	\begin{align}
		\tikzfig{ket+itranspose}\\
		\tikzfig{ket-itranspose}
	\end{align}
	}

	Conjugate transpose:

	\textnormal{The conjugate transpose\footnote{In some contexts, the word \textit{adjoint} is used interchangeably with conjugate transpose.} of a diagram is its horizontal reflection followed by $180\deg$ rotation, or equivalently its $180\deg$ rotation followed by horizontal reflection.  Taking the conjugate transpose of $\kx{+i}$ and $\kx{-i}$ respectively, we get their bra statevectors
	\begin{align}
		\tikzfig{bra+i}\\
		\tikzfig{bra-i}
	\end{align}
	This is consistent, because both taking the conjugate and then the transpose, and taking the transpose then the conjugate, yield the conjugate transpose.
	}
\end{example}

\newpage
\section{Recipe for one-qubit quantum circuits}
You could say that a quantum circuit has three essential ingredients: states, gates, and measurements.
In the last chapter, we initiated our preparation of these ingredients.
\begin{itemize}
	\item We learned how to represent a pure qubit state as a ket vector.
	\item We got a sneak peek at our first quantum gate when we learned that the qubit NOT gate (a.k.a. X gate) switches $\kz0$ to $\kz1$, and $\kz1$ to $\kz0$.
	\item We learned about how we can explain the funky physics of quantum measurement thanks to the probabilities we get when we test our quantum states for our chosen basis.
\end{itemize}

You may have noticed that for states and measurements, we have introduced how to compute them, but we haven't looked at any mathematical definitions of quantum gates yet.  Before we do, we'll first study classical gates before we discuss the differences between classical and quantum gates.  Getting comfortable with classical circuit diagrams will help us relate to quantum circuits and appreciate their utility.


\newpage
\section{When you have more than one qubit}
{\small\textit{This section will assume knowledge of vectors and matrices, and will introduce bra-ket notation alongside diagrammatic notation.  To brush up on the relevant linear algebra, visit \url{https://qiskit.org/textbook/ch-appendix/linear_algebra.html}}}

Any pure quantum state of $n$ qubits is described by a column vector of $2^n$ complex numbers --- one for each possible binary string of length $n$.  In bra-ket notation, this $n$ qubit state is denoted $\ket{v}$.
\begin{equation}
\tikzfig{ket}
\end{equation}
$v_1,...,v_{2^n}$ are complex numbers.


\bibliography{qiskit+zx.bib}
\end{document}
